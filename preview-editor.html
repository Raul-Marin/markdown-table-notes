<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Editor UI Preview — figma.showUI</title>
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background: #2c2c2c;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 16px;
      padding: 40px 20px;
    }

    .label {
      font-size: 11px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: .08em;
      color: #888;
    }

    /* Simula la ventana flotante de Figma */
    .figma-window {
      width: 500px;
      height: 400px;
      border-radius: 6px;
      overflow: hidden;
      box-shadow: 0 8px 40px rgba(0,0,0,.6);
      position: relative;
    }

    /* Barra de título estilo Figma */
    .figma-titlebar {
      height: 32px;
      background: #2c2c2c;
      display: flex;
      align-items: center;
      padding: 0 12px;
      gap: 8px;
      border-bottom: 1px solid #1a1a1a;
      flex-shrink: 0;
    }
    .figma-dot {
      width: 12px; height: 12px;
      border-radius: 50%;
    }
    .figma-dot.red    { background: #ff5f57; }
    .figma-dot.yellow { background: #febc2e; }
    .figma-dot.green  { background: #28c840; }
    .figma-titlebar-name {
      font-size: 12px;
      color: #aaa;
      margin-left: 6px;
    }

    /* El iframe que contiene el HTML exacto del widget */
    iframe {
      width: 100%;
      height: calc(400px - 32px);
      border: none;
      display: block;
    }

    .note {
      font-size: 12px;
      color: #666;
      max-width: 500px;
      text-align: center;
      line-height: 1.5;
    }
    .note code {
      background: #3a3a3a;
      color: #ccc;
      padding: 1px 5px;
      border-radius: 3px;
      font-size: 11px;
    }
  </style>
</head>
<body>

  <div class="label">Vista previa — figma.showUI (500 × 400 px)</div>

  <div class="figma-window">
    <div class="figma-titlebar">
      <span class="figma-dot red"></span>
      <span class="figma-dot yellow"></span>
      <span class="figma-dot green"></span>
      <span class="figma-titlebar-name">Craft#DS md notes</span>
    </div>
    <iframe id="editorFrame"></iframe>
  </div>

  <p class="note">
    Este es el HTML exacto que genera <code>figma.showUI()</code> en el widget actual.<br>
    El botón "Save" no hace nada aquí (en Figma envía el markdown de vuelta al widget).
  </p>

  <script>
    const DEFAULT_MD = `# Markdown Table Notes\n\nThis is **Markdown Table Notes** - a Figma widget with full Markdown support!\n\n## Features\n\n- Visual tables\n- Checkboxes\n- Nested lists\n- Clickable links\n- Color swatches (e.g. #1a4cb3)\n\n## Table Example\n\n| Feature | Status |\n|---------|--------|\n| Tables | ✅ |\n| Checkboxes | ✅ |\n| Links | ✅ |\n\n## Color Tokens\n\n| Token | Hex Value |\n|-------|----------|\n| primary | #1a4cb3 |\n| error | #ba1b1b |\n| surface | #e3e6eb |\n\n## Task List\n\n- [x] Implement tables\n- [x] Add checkbox support\n- [ ] Add more features\n\n## Links\n\nVisit [Figma Community](https://figma.com/community) for more widgets.\n\n---\n\nClick Edit to modify.`;

    // HTML exacto que usa el widget (copiado tal cual de widget.tsx línea 353)
    const esc = DEFAULT_MD.replace(/</g, '&lt;').replace(/>/g, '&gt;');
    const html = `<html><head><style>*{margin:0;padding:0;box-sizing:border-box}body{font-family:system-ui;padding:16px;height:100vh;display:flex;flex-direction:column;background:#f5f5f5}textarea{flex:1;width:100%;padding:12px;border:1px solid #ccc;border-radius:8px;font-family:monospace;font-size:13px;resize:none}button{margin-top:12px;padding:10px 20px;background:#0066ff;color:#fff;border:none;border-radius:6px;cursor:pointer;font-size:14px}</style></head><body><textarea id="e">${esc}</textarea><button>Save</button></body></html>`;

    const iframe = document.getElementById('editorFrame');
    iframe.srcdoc = html;
  </script>
</body>
</html>
