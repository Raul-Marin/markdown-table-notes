# MarkdownのテーブルをFigmaでちゃんと表示できるウィジェットを作ってみた

今回は、MarkdownをFigmaに表示できるウィジェット「Markdown Table Notes」を作ってみた、という体験をシェアしたいと思います。

特にこだわったのは、**テーブルをテキストではなく、ちゃんとビジュアルとして表示する**こと。これが意外となかったんです。

---

## きっかけ：Markdownが好きな私の悩み

私はMarkdownが好きです。

ドキュメントを書くとき、メモを取るとき、仕様をまとめるとき。気づいたらMarkdownで書いてしまっています。シンプルな記法で構造化された文章が書けるのが良いんですよね。

で、Figmaで作業しているとき、キャンバス上にメモや仕様書を置いておきたいことがあるじゃないですか。

「これ、Markdownで書けたら便利なのに...」

そう思って、既存のウィジェットやプラグインを探してみました。

### 試してみたもの①：Simple Markdown Notes

https://www.figma.com/community/widget/1124191550873158701

これは結構よくできていて、見出しやリスト、コードブロックなんかは綺麗に表示してくれます。

でも、**テーブルが表示されない**んです。

Markdownでテーブルを書いても、ただの文字列として表示されるだけ。仕様書とか書くときって、テーブル使いたいこと多いじゃないですか...。

### 試してみたもの②：Markly

https://www.figma.com/community/plugin/1491236431880377267

こちらはプラグインタイプ。Markdownを貼り付けると、Figmaのレイヤーに変換してくれます。

でも、いくつか不満がありました：

- テーブルが「テーブル」として表示されない（`|---|---|`がそのまま...）
- 幅が300px固定で狭い
- 1行ごとに別のテキストレイヤーになるので、まとまりがない

「テーブルもちゃんとビジュアルで表示したい！」
「幅も自由に変えたい！」

そう思って、自分で作ってみることにしました。

---

## 完成したウィジェット

完成したのがこちらです。

**Markdown Table Notes**
https://www.figma.com/community/widget/1594023679858160179

![ウィジェットのスクリーンショット]
（※スクリーンショットを挿入）

Markdownを入力すると、テーブルも含めてビジュアルとして表示してくれます。

---

## このウィジェットでできること

### 📊 ビジュアルテーブル（これが一番の売り）

Markdownのテーブル記法がちゃんと「表」として表示されます。

- ヘッダー行は背景色付き
- データ行は交互に色が変わって見やすい
- セルごとにボーダーがついている

他のMarkdownツールだと、`| Header | Header |` みたいなテキストがそのまま表示されがちなんですが、このウィジェットはちゃんと表組みになります。

### ↔ 幅の即時切り替え

ツールバーに「↔」ボタンがあって、クリックするたびに幅が切り替わります。

- **S**（400px）：コンパクトなメモ用
- **M**（600px）：標準的なドキュメント
- **L**（800px）：広めのコンテンツ
- **XL**（1200px）：フルサイズの仕様書

いちいちメニューを開かなくても、ワンクリックでサイズを変えられるのが地味に便利です。

### 🎨 Light / Dark テーマ

ツールバーのドロップダウンからテーマを切り替えられます。Figmaのキャンバスの雰囲気に合わせて選べます。

### ✅ チェックボックス

タスクリストもちゃんと表示されます。

```
- [x] 完了したタスク
- [ ] これからやるタスク
```

チェック済みのアイテムは取り消し線付きで表示されるので、進捗が一目でわかります。

### 🔗 クリック可能なリンク

`[テキスト](URL)` 形式で書いたリンクは、**クリックすると実際にそのURLを開けます**。
これ、地味に便利です。参考資料へのリンクとかを貼っておけるので。

### 📋 ネストしたリスト

インデントしたリストもちゃんと階層表示されます。

```
- 親アイテム
  - 子アイテム
    - 孫アイテム
```

### その他の機能

- 見出し（H1〜H6）
- 太字・斜体
- 番号付きリスト
- コードブロック
- 水平線
- 画像（プレースホルダー表示）

基本的なMarkdown要素は一通りサポートしています。

---

## 使い方

使い方はめちゃめちゃシンプルです。

① ウィジェットをキャンバスに配置

② ツールバーの「Edit」をクリック

③ Markdownを入力して「Save」

![編集画面のスクリーンショット]
（※スクリーンショットを挿入）

④ 「↔」ボタンで好きなサイズに調整

以上です。

---

## Cursorでの開発プロセス

### 「バイブコーディング」で作る

今回もCursorを使って開発しました。いわゆる「バイブコーディング」です。

最初に伝えたのはこんな感じ：

> MarkdownをFigmaに表示するウィジェットを作りたい。既存のプラグインではテーブルがちゃんと表示されないので、テーブルをビジュアルとして表示したい。幅も自由に変えられるようにしたい。

具体的な実装方法は指示せず、「何を実現したいか」という意図を伝えただけです。

### 技術的な話（AIが選んでくれた）

Cursorが選んだ技術スタックは以下の通り：

- **TypeScript**：型があるのでAIが正確なコードを書きやすい
- **esbuild**：高速なビルドツール
- **カスタムMarkdownパーサー**：ES5互換の自作パーサー

...ん？「カスタムMarkdownパーサー」？

そう、ここでちょっとした罠がありました。

### ES5という制約との戦い

最初は`marked.js`という有名なMarkdownパーサーライブラリを使おうとしたんです。

ところが、ビルドして動かしてみると...

```
Syntax error on line 1: Unexpected token ...
```

エラー。

調べてみると、FigmaのWidget実行環境は**ES5しかサポートしていない**ことが判明。

ES5って、2009年のJavaScript仕様なんですよね。つまり：

- スプレッド演算子（`...`）が使えない
- `for...of`ループが使えない
- `const`や`let`も怪しい

`marked.js`の内部でこれらのES6+構文が使われていて、そのままでは動かなかったんです。

結局、**ES5互換のカスタムMarkdownパーサーを自作する**ことになりました。

テーブル記法のパース、見出しの検出、リストの処理、チェックボックスの検出、リンクのパース...。地味な作業ですが、こういう制約との戦いもAIがちゃんとやってくれました。

ちなみに、リンクをクリック可能にするのは `figma.openExternal(url)` というAPIを使っています。これもAIが見つけてきてくれました。

---

## やってみて感じたこと

### AIにできたこと

- Figma Widget APIの使い方の理解
- ES5互換のコード生成（`var`で変数宣言、従来の`for`ループ）
- カスタムMarkdownパーサーの実装（テーブル、チェックボックス、リンク、ネストリスト対応）
- テーブルのビジュアル化ロジック（行・列の計算、交互の背景色）
- リンクのクリック処理（`figma.openExternal`）
- エラーハンドリングとデバッグ

「ES5で動かないよ」とフィードバックしたら、ちゃんとES5互換のコードに書き換えてくれました。
「チェックボックスとリンクも対応して」と言ったら、パーサーを拡張してくれました。

### 限界・今後の課題

一方で、まだ完璧ではない部分もあります：

- 画像はプレースホルダー表示（Figma Widgetの制約で外部画像の直接埋め込みが難しい）
- 複雑なネストや特殊なMarkdown記法には未対応のものもある

とはいえ、日常的な用途では十分使えるレベルになったと思います。

---

## おわりに

以上、MarkdownのテーブルをFigmaで表示できるウィジェットを作ってみた、という体験記でした。

完成したウィジェットはこちらです：

**Markdown Table Notes**
https://www.figma.com/community/widget/1594023679858160179

Figmaでメモや仕様書を書くとき、「Markdownで書きたいな」「テーブルも使いたいな」という方、ぜひ使ってみてください。

フィードバックや改善提案も大歓迎です！

お読みくださりありがとうございました🙇

---

#Figma #Markdown #個人開発 #作ってみた #バイブコーディング #AI #生成AI #AIとやってみた #業務効率化 #デザイン #ウィジェット

